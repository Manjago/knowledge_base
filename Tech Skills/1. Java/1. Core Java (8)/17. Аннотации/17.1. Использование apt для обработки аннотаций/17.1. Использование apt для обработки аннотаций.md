# Использование apt для обработки аннотаций
## Описание apt
**apt** (Annotation Processing Tool) - программа, упрощающая обработку аннотаций.<br/>
Как и `javac`, программа `apt` работает с исходными файлами Java, а не с откомпилированными классами.<br/>
По умолчанию, `apt` компилирует исходные файлы после завершения их обработки (проверяет исходные файлы на наличие аннотаций и компилирует их за один проход).<br/>
_Эккель Б. Философия Java. 4-е полное изд. Стр. 861_

## Раунды обработки
Когда обработчик аннотаций создает новый исходный файл, он проверяется на аннотации в следущем раунде.<br/>
Программа продолжает обработку раунд за раундом, пока новые исходные файлы не перестанут появляться.<br/>
После этого, она компилирует все исходные файлы.<br/>
_Эккель Б. Философия Java. 4-е полное изд. Стр. 861_

## `AnnotationProcessorFactory`
Работа `apt` основана на использовании интерфейса `AnnotatoProcessorFactory`, создающего нужный обработчик для каждой найденной аннотации.<br/>
При запуске `apt` указывается либо класс-файбрика, либо путь, по которому находятся необходимые фабрики. Если этого не сделать, `apt` запускает сложный процесс поиска.<br/>
При создании обработчика аннотаций **нельзя** использовать reflection, потому что работа происходит с иходным кодом (если не используется ключ `-XclasseAsDecls`), а не с откомилированными классами. Эту проблму решает **mirror API** (в зеркале можно найти отражение :) ).<br/>
_Эккель Б. Философия Java. 4-е полное изд. Стр. 861_

## Нет в Java 8
В Java 8 многих классов нет.<br/>
Есть https://docs.oracle.com/javase/6/docs/api/javax/annotation/processing/package-summary.html<br/>
и внешняя библиотека где то (но не факт, что нормальная)<br/>
Самого `apt` в `bin` не найдено.