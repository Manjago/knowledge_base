# IoC: поиск и внедрение зависимостей, IoC в Spring
## Преимущества внедрения зависимостей
* **Сокращение объема связующего кода**. Связующий код тривиален и шаблонен, кроме того, связующий код для JNDI может быть сложным. В таком случае внедрение зависимостей может действительно упростить связующий код
* **Упрощенное конфигурирование приложений**. Можно использовать разные способы внедрения зависимостей, менять реализации
* **Возможность управлять общими зависимостями в одном хранилище**. При традиционном подходе управления зависимостями общих служь, экземпляры зависимостей получаются там, где требуются. Это приводит к распространению зависимостей среди многих классов, что затрудняет их изменение.
* **Улучшенная тестируемость**
* **Стимулирование качественных проектных решений**. Проектирование по отношению к интерфейсам.

_Козмина Ю., Харроп Р., Шефер К., Хо К., Spring 5 для профессионалов. Стр. 40-42_

## Инверсия управления
Инверсия управление, а значит и внедрение зависимостей, направлены на то, чтобы предоставить простой механизм для снабжения компонента зависимостями и управления ими на протяжении их жизненного цикла.<br/>
_Зависимый объект_ (_целевой объект_ в случае инверсии управления) - комонент, которому требуются определенные зависимости<br/>
_Козмина Ю., Харроп Р., Шефер К., Хо К., Spring 5 для профессионалов. Стр. 80_

## Подтипы инверсии управления
* внедрение зависимостей
* поиск зависимостей

_Козмина Ю., Харроп Р., Шефер К., Хо К., Spring 5 для профессионалов. Стр. 80_

## Извлечение зависимостей
В этом случае зависимости извлекаются из реестра по мере необходимости.<br/>
К примеру, по `JNDI`<br/>
_Козмина Ю., Харроп Р., Шефер К., Хо К., Spring 5 для профессионалов. Стр. 81_

## Контекстный поиск зависимостей (CDL)
Контекстный поиск зависимостей (CDL) подобен извлечению зависимостей, но в этом случае поиск осуществляется в контейнере, управляющем ресурсом а не в каком-то центральном реестре.<br/>
Как правило, контекстный оиск зависимостей производится в установленной точке.<br/>
Компонент извещает контейнер, что ему требуется получить зависимость. Контейнер предоставляется сервером приложений (к примеру JBoss, Tomcat) или каркасом (к примеру Spring)<br/>
_Козмина Ю., Харроп Р., Шефер К., Хо К., Spring 5 для профессионалов. Стр. 82_

## Внедрение зависимостей через конструктор
Внедрение зависимостей через конструктор происходит в том случае, когда зависимости предоставляются компоненту в его конструкторе (или нескольких конструкторах).<br/>
С этой целью в конпоненте объявляется один или ряд конструкторов, получающих в качестве аргументов его зависимости, а контейре IoC передает зависимости компоненту при получении его экземпляра.<br/>
Вследствии внедрния через конструктор объект не может быть создан без зависимостей, а следовательно , они обязательны.<br/>
_Козмина Ю., Харроп Р., Шефер К., Хо К., Spring 5 для профессионалов. Стр. 83_

## Внедрение зависимостей через метод установки
При таком внедрении контейнер IoC внедряет зависимости компонента через методы установки в стиле компонентов `JavaBeans` (set-еры)<br/>
В таком случае, компонент может быть создан без зависимостей, которые могут быть предоставлены в дальнейшем через вызовы set-еров<br/>
_Козмина Ю., Харроп Р., Шефер К., Хо К., Spring 5 для профессионалов. Стр. 84_

## Один из недостатков поиска зависимостей
Недостаток состоит в том, что поиск зависимостей сильно затрудняет тестирование классов отдельно от контейнера.<br/>
А при внедрении зависимостей тестирование компонентов не составит особого труда, поскольку для этого достаточно предоставить зависимости с помощью подходящего конструктора или метода установки<br/>
_Козмина Ю., Харроп Р., Шефер К., Хо К., Spring 5 для профессионалов. Стр. 85_

## Выбор между внедрением зависимостей и поиском зависимостей
Как правило, выбор типа IoC зависит от применяемого контейнера.<br/>
Если применяется каркас EJB (вплоть до 2.1), то следует выбрать  поиск зависмостей (через JNDI), чтобы получить доступ к EJB из контейнера JEE.<br/>
А в Spring конмпоненты всегда связываются вместе с помощью внедрения, за исключением первоначальных поисков компонентов Spring beans.<br/>
_Козмина Ю., Харроп Р., Шефер К., Хо К., Spring 5 для профессионалов. Стр. 85_

## Внедрение через конструктор или метод установки
Внедрение через конструктор особенно удобно, если эземпляр класса зависимости должен существовать перед применением компонента.<br/>
Внедрение через метод установки полезно, если компонент готов предоставить какие то стандартные настройки.<br/>
_Козмина Ю., Харроп Р., Шефер К., Хо К., Spring 5 для профессионалов. Стр. 86_